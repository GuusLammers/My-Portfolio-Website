import*as e from"https://unpkg.com/three@0.129.0/build/three.module.js";const t={width:150,height:50,widthSegments:90,heightSegments:30,r:0,g:.15,b:.2,rHover:.35,gHover:1,bHover:1};const o=new e.Scene,i=new e.Raycaster,n=new e.PerspectiveCamera(75,innerWidth/innerHeight,.1,1e3);n.position.y=1,n.position.z=5,n.rotation.x=-.2;const a=10,r=10,s=new e.PlaneGeometry(100,50,60,30),d=new e.BufferGeometry,c=[];for(var h=0;h<1e4;h++){const e=2e3*(Math.random()-.5),t=2e3*(Math.random()-.5),o=2e3*-Math.random()-200;c.push(e,t,o)}d.setAttribute("position",new e.Float32BufferAttribute(c,3));const g=new e.MeshStandardMaterial({side:e.DoubleSide,flatShading:e.FlatShading,vertexColors:!0});g.metalness=.3,g.roughness=.4;const l=new e.PointsMaterial({color:16777215}),m=new e.Points(d,l),p=new e.Mesh(s,g);p.rotateX(-1.5),function(){p.geometry.dispose(),p.geometry=new e.PlaneGeometry(t.width,t.height,t.widthSegments,t.heightSegments),p.position.setY(-6.5);const{array:o}=p.geometry.attributes.position,i=[];for(let e=0;e<o.length;e++){if(e%3==0){const t=o[e],i=o[e+1],n=o[e+2];o[e]=t+Math.random()-.5,o[e+1]=i+Math.random()-.5,o[e+2]=n+Math.random()}i.push((Math.random()-.5)*Math.PI*2)}p.geometry.attributes.position.originalPosition=p.geometry.attributes.position.array,p.geometry.attributes.position.randomValues=i;const n=[];for(var a=0;a<p.geometry.attributes.position.count;a++)n.push(t.r,t.g,t.b);p.geometry.setAttribute("color",new e.BufferAttribute(new Float32Array(n),3))}();const y=new e.DirectionalLight(16777215,.5);y.position.set(0,2,-.75),o.add(p),o.add(y),o.add(m);const u={x:0,y:0},b={opacity:0},f={opacity:1},w=new e.WebGLRenderer({antialias:!0});w.setSize(innerWidth,innerHeight),w.setPixelRatio(devicePixelRatio),w.antialias=!0,document.body.appendChild(w.domElement);let v=0,M=!1;!function e(){requestAnimationFrame(e),w.render(o,n),i.setFromCamera(u,n),v+=.01;const{array:s,originalPosition:d,randomValues:c}=p.geometry.attributes.position;for(let t=0;t<s.length;t+=3)s[t]=d[t]+.003*Math.cos(v+c[t]),s[t+1]=d[t+1]+.003*Math.sin(v+c[t+1]);p.geometry.attributes.position.needsUpdate=!0;const h=i.intersectObject(p);if(h.length>0){const{color:e}=h[0].object.geometry.attributes;e.setX(h[0].face.a,.53),e.setY(h[0].face.a,.88),e.setZ(h[0].face.a,.39),e.setX(h[0].face.b,.53),e.setY(h[0].face.b,.88),e.setZ(h[0].face.b,.39),e.setX(h[0].face.c,.53),e.setY(h[0].face.c,.88),e.setZ(h[0].face.c,.39),e.needsUpdate=!0;const o={r:t.r,g:t.g,b:t.b},i={r:t.rHover,g:t.gHover,b:t.bHover};gsap.to(i,{r:o.r,g:o.g,b:o.b,onUpdate:()=>{e.setX(h[0].face.a,i.r),e.setY(h[0].face.a,i.g),e.setZ(h[0].face.a,i.b),e.setX(h[0].face.b,i.r),e.setY(h[0].face.b,i.g),e.setZ(h[0].face.b,i.b),e.setX(h[0].face.c,i.r),e.setY(h[0].face.c,i.g),e.setZ(h[0].face.c,i.b),e.needsUpdate=!0}})}if(M||gsap.to(n.rotation,{x:.5*u.y-.2,y:.075*-u.x,duration:4}),M){gsap.to(n.position,{duration:2,y:a,z:r,onComplete:()=>{M=!0}}),gsap.to(n.rotation,{duration:2,x:-1.2,y:0,z:0});var g=document.getElementById("skyViewContainer");gsap.to(f,{duration:1,opacity:0,onUpdate:()=>{g.style.opacity=f.opacity},onComplete:()=>{g.style.display="none",(g=document.getElementById("planeContainer")).style.display="block",gsap.to(b,{duration:1,opacity:1,onUpdate:()=>{g.style.opacity=b.opacity}})}})}}(),addEventListener("mousemove",(e=>{u.x=e.clientX/innerWidth*2-1,u.y=-(e.clientY/innerHeight*2-1)}));const P={width:window.innerWidth,height:window.innerHeigth};window.addEventListener("resize",(()=>{P.width=window.innerWidth,P.height=window.innerHeight,n.aspect=P.width/P.height,n.updateProjectionMatrix(),w.setSize(P.width,P.height),w.setPixelRatio(Math.min(window.devicePixelRatio,2))})),document.getElementById("transitionBtn").addEventListener("click",(function(){M=!0}));
